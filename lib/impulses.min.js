!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("impulses",[],t):"object"==typeof exports?exports.impulses=t():n.impulses=t()}(this,function(){return function(n){function t(r){if(e[r])return e[r].exports;var u=e[r]={i:r,l:!1,exports:{}};return n[r].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var e={};return t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{configurable:!1,enumerable:!0,get:r})},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=1)}([function(n,t,e){"use strict";function r(n){if(Array.isArray(n)){for(var t=0,e=Array(n.length);t<n.length;t++)e[t]=n[t];return e}return Array.from(n)}function u(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function n(){function t(n){for(var t="",e=0;e<4;e++)t+=y[n>>8*e+4&15]+y[n>>8*e&15];return t}function e(n,t){if(p||g){var e=(65535&n)+(65535&t);return(n>>16)+(t>>16)+(e>>16)<<16|65535&e}return n+t&4294967295}function i(n,t,r,u,i,o){return t=e(e(t,n),e(u,o)),e(t<<i|t>>>32-i,r)}function o(n,t,e,r,u,o,c){return i(t&e|~t&r,n,t,u,o,c)}function c(n,t,e,r,u,o,c){return i(t&r|e&~r,n,t,u,o,c)}function a(n,t,e,r,u,o,c){return i(t^e^r,n,t,u,o,c)}function f(n,t,e,r,u,o,c){return i(e^(t|~r),n,t,u,o,c)}function s(n){for(var t=[],e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}function l(n){var e=[];return n.forEach(function(n){e.push(t(n))}),e.join("")}function d(n,t){t.cycles.reduce(function(t,e){return e.blockMap.forEach(function(u,i){t[0]=e.method.apply(e,[].concat(r(t),[n[u]],r(e.extra[i]))),t.unshift(t.pop())}),t},t.runState)}function h(n,t){var r=n[0],u=n[1],i=n[2],s=n[3],l={runState:[r,u,i,s],cycles:[{method:o,blockMap:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],extra:[[7,-680876936],[12,-389564586],[17,606105819],[22,-1044525330],[7,-176418897],[12,1200080426],[17,-1473231341],[22,-45705983],[7,1770035416],[12,-1958414417],[17,-42063],[22,-1990404162],[7,1804603682],[12,-40341101],[17,-1502002290],[22,1236535329]]},{method:c,blockMap:[1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12],extra:[[5,-165796510],[9,-1069501632],[14,643717713],[20,-373897302],[5,-701558691],[9,38016083],[14,-660478335],[20,-405537848],[5,568446438],[9,-1019803690],[14,-187363961],[20,1163531501],[5,-1444681467],[9,-51403784],[14,1735328473],[20,-1926607734]]},{method:a,blockMap:[5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2],extra:[[4,-378558],[11,-2022574463],[16,1839030562],[23,-35309556],[4,-1530992060],[11,1272893353],[16,-155497632],[23,-1094730640],[4,681279174],[11,-358537222],[16,-722521979],[23,76029189],[4,-640364487],[11,-421815835],[16,530742520],[23,-995338651]]},{method:f,blockMap:[0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],extra:[[6,-198630844],[10,1126891415],[15,-1416354905],[21,-57434055],[6,1700485571],[10,-1894986606],[15,-1051523],[21,-2054922799],[6,1873313359],[10,-30611744],[15,-1560198380],[21,1309151649],[6,-145523070],[10,-1120210379],[15,718787259],[21,-343485551]]}]};d(t,l),n[0]=e(l.runState[0],n[0]),n[1]=e(l.runState[1],n[1]),n[2]=e(l.runState[2],n[2]),n[3]=e(l.runState[3],n[3])}function v(n){var t=n.length,e=[1732584193,-271733879,-1732584194,271733878],r=void 0;for(r=64;r<=n.length;r+=64)h(e,s(n.substring(r-64,r)));n=n.substring(r-64);var u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<n.length;r++)u[r>>2]|=n.charCodeAt(r)<<(r%4<<3);return u[r>>2]|=128<<(r%4<<3),r>55&&(h(e,u),u.fill(0,0,15)),u[14]=8*t,h(e,u),l(e)}var p=arguments.length>0&&void 0!==arguments[0]&&arguments[0];u(this,n);var y="0123456789abcdef".split(""),g=!1;(p||"5d41402abc4b2a76b9719d911017c592"!==v("hello"))&&(g=!0),this.calculate=function(n){return v(n)}};t.Md5=i},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(2);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.Api}}),n.exports=t.default},function(n,t,e){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Api=void 0;var u=e(0),i=e(3),o=function n(){function t(){return M}function e(){return null!==E}function o(n){return n.constructor===i.Bus}function c(n){if(!o(n))throw TypeError("Expecting Bus type");E=n}function a(n){return!(n.constructor!==Object||!n.hasOwnProperty("entity")||!n.hasOwnProperty("channels")||n.channels.constructor!==Array)}function f(n,t){if(e()){var r=E.get(n,t);if(null!==r)return r}}function s(n){if(j.has(n)){var t=j.get(n);return f(t.entity,t.channel)}}function l(n,t){var e=f(n,t);return e?e.getStatus():void 0}function d(n,t){var e=f(n,t);return!!e&&e.open()}function h(n,t){var e=f(n,t);return!!e&&e.close()}function v(n,t){var e=f(n,t);return!!e&&e.hold()}function p(n,t){var e=f(n,t);return!!e&&e.resume()}function y(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e()){if(a(n)){var r=n.channels.map(function(e){var r={entity:n.entity,name:e.name};return void 0!==e.require&&(r.require=e.require),void 0!==e.listenerInfo&&(r.listener=e.listenerInfo,r.listener.id=t()),r});return E.register(r)}throw TypeError("Invalid channel configuration")}throw Error("Target BUS is not set")}function g(){j.forEach(function(n,t,e){w(t)||m(listenerId)})}function O(n,t,e){g();var r=f(n,t),u=!1;return r&&(u=r.addListener(e))&&j.set(u,{entity:n,channel:t}),u}function m(n){var t=s(n);t&&t.removeListener(n),j.delete(n)}function w(n){var t=s(n);return t?t.listenerInfo(n):null}function b(n,t,e){g();var r=f(n,t);return!!r&&r.send(e)}function S(n,t,e,r){var u=f(n,t);return!!u&&u.sendAndListen(e,r)}function _(n,t,e){var r=f(n,t);return r?r.messageInfo(e):null}function x(n,t){return!!e()&&E.get(n,t)}function P(n){return void 0!==n.reply_stack&&n.reply_stack.pop()}function C(n,t){var e=P(t);if(!1!==e){var r=x(e.entity,e.name);if(r)return n.reply=!0,r.send(n),!0}return!1}var A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},T=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(r(this,n),A.constructor!==Object)throw TypeError("Configuration must be of type Object");if(null!==T&&T.constructor!==i.Bus)throw TypeError("Public BUS Object is Invalid");var j=new Map,E=T,M=void 0;M=function(){return M||(new u.Md5).calculate(JSON.stringify(this)+""+5e3*Math.random())}(),this.getId=function(){return t()},this.hasBus=function(){return e()},this.setBus=function(n){return c(n)},this.getChannelStatus=function(n,t){return l(n,t)},this.openChannel=function(n,t){return d(n,t)},this.closeChannel=function(n,t){return h(n,t)},this.holdChannel=function(n,t){return v(n,t)},this.resumeChannel=function(n,t){return p(n,t)},this.initChannels=function(n){return y(n)},this.addListener=function(n,t,e){return O(n,t,e)},this.removeListener=function(n){return m(n)},this.getListenerInfo=function(n){return w(n)},this.exists=function(n,t){return!!x(n,t)},this.send=function(n,t,e){return b(n,t,e)},this.sendAndListen=function(n,t,e,r){return S(n,t,e,r)},this.getMessageInfo=function(n,t,e){return _(n,t,e)},this.reply=function(n,t){return C(n,t)}};t.Api=o},function(n,t,e){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Bus=void 0;var u=e(4),i=function n(){function t(n){return void 0!==n.entity&&(void 0!==n.name&&(void 0===n.require||n.require.constructor===Array))}function e(n){var e=[];return n.constructor!==Array&&(n=[n]),n.forEach(function(n){if(t(n)){var r=Object.assign({},n),i=r.entity,o=r.name;delete r.entity,delete r.name,r.channel=new u.Channel(i,o),void 0!==r.listener&&r.channel.addListener(r.listener),c.hasOwnProperty(i)||Reflect.set(c,i,{});var a=Reflect.getOwnPropertyDescriptor(c,i).value;a.hasOwnProperty(o)||(Reflect.set(a,o,r),e.push(i+"."+o))}}),e}function i(n,t){return!!c.hasOwnProperty(n)&&(null===t||null!==o(n,t))}function o(n,t){if(c.hasOwnProperty(n)){var e=Reflect.getOwnPropertyDescriptor(c,n).value;if(e.hasOwnProperty(t))return Reflect.getOwnPropertyDescriptor(e,t).value.channel}return null}r(this,n);var c={};this.register=function(){return e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])},this.exists=function(n){return i(n,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)},this.get=function(n,t){return o(n,t)}};t.Bus=i},function(n,t,e){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.channelStatusCodes=t.Channel=void 0;var u=e(5),i=e(0),o={CLOSED_STATUS:0,OPEN_STATUS:1,ON_HOLD_STATUS:2},c=function n(t,e){function c(){return q}function a(){return D}function f(){return R}function s(){return R&&U}function l(){return R&&!U}function d(){for(;a(););D=!0}function h(){D=!1}function v(){return!l()&&(R=!0,U=!1,E(),!0)}function p(){return!!f()&&(R=!1,!0)}function y(){return!!l()&&(U=!0,!0)}function g(){return!!s()&&(U=!1,E(),!0)}function O(){return f()?s()?o.ON_HOLD_STATUS:o.OPEN_STATUS:o.CLOSED_STATUS}function m(n){return!!w(n)&&Q.add(n)}function w(n){return!!n&&(void 0!==n.id&&(void 0!==n.listener&&"function"==typeof n.listener))}function b(n){Q.cancel(n),S(n)}function S(n){try{var t=N.findIndex(function(t){return t.qid===n});t>=0&&N.splice(t,1)}catch(n){}}function _(n){return x(n,function(){var t=N.find(function(t){return t.qid===n});return t?t.data:null})}function x(n,t){if(!n)return null;d();var e=Q.get(n);return h(),null===e?t():e.data}function P(n){var t={entity:B,name:q};void 0===n.reply_stack&&(n.reply_stack=[]),n.reply_stack.push(t)}function C(n){try{P(n),N.forEach(function(t){t.data.listener(n),t.data.times>0&&t.data.times--}),N=N.filter(function(n){return void 0===n.data||void 0===n.data.times||0!==n.data.times})}catch(n){}}function A(n){return H.add(Object.assign({},n))}function T(n,t){var e=m(t);return A(n),e}function j(n){return H.get(n).data}function E(){l()&&(M(),L(),setTimeout(E,0))}function M(){if(!a()){d();for(var n=null,t=Q.next();null!==t;){if("function"==typeof t.data.listener){n=k.calculate(t.toString());var e={id:n,qid:t.id,data:t.data};N.push(e)}t=Q.next()}h()}}function L(){for(var n=H.next();null!==n;)C(n.data),n=H.next()}var I=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r(this,n);var k=new i.Md5,D=!1,B=t,q=e,R=!0,U=I||!1,N=[],Q=new u.Queue,H=new u.Queue;!function(){s()||E()}(),this.getName=function(){return c()},this.getStatus=function(){return O()},this.open=function(){return v()},this.close=function(){return p()},this.hold=function(){return y()},this.resume=function(){return g()},this.addListener=function(n){return m(n)},this.removeListener=function(n){return b(n)},this.listenerInfo=function(n){return _(n)},this.send=function(n){return A(n)},this.sendAndListen=function(n,t){return T(n,t)},this.messageInfo=function(n){return j(n)}};t.Channel=c,t.channelStatusCodes=o},function(n,t,e){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Queue=void 0;var u=e(6),i=function n(){function t(){return d}function e(){for(;t(););d=!0}function i(){d=!1}function o(){if(s.length>0){e();var n=s.shift(),t=f(n);return l.destroy(n),i(),t}return null}function c(n){e();for(var t=Date.now().toString();l.isSet(t);)t=Date.now().toString();return l.set(t,{id:t,data:n}),s.push(t),i(),t}function a(n){var t=s.indexOf(n);if(t>=0){e(),s.splice(t,1);var r=l.destroy(n);return i(),null===r||r}return null}function f(n){return l.get(n)}r(this,n);var s=[],l=new u.Values,d=!1;this.next=function(){return o()},this.add=function(n){return c(n)},this.cancel=function(n){return a(n)},this.get=function(n){return f(n)}};t.Queue=i},function(n,t,e){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function n(){function t(){s=!0}function e(){s=!1}function u(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return""===n?l:n.split(".").reduce(function(n,t){return n[t]||null},l)}function i(n){var t=n.split("."),e=t.splice(-1,1)[0],r=u(t.join("."));return!!r.hasOwnProperty(e)&&Reflect.deleteProperty(r,e)}function o(n){return u(n)}function c(n,e){var r=n.split("."),u=r.reduce(function(n,t,e){return n.hasOwnProperty(t)||Reflect.set(n,t,{}),e===r.length-1?n:n[t]},l);!0===Reflect.set(u,r.pop(),e)&&t()}function a(n){return null!==u(n)}var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r(this,n);var s=null!==f,l=f||{};this.isDirty=function(){return s},this.export=function(){return e(),Object.assign({},l)},this.set=function(n,t){c(n,t)},this.isSet=function(n){return a(n)},this.get=function(n){return o(n)},this.destroy=function(n){return i(n)}};t.Values=u}])});