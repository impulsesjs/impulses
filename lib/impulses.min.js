!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("impulses",[],n):"object"==typeof exports?exports.impulses=n():t.impulses=n()}(this,function(){return function(t){function n(r){if(e[r])return e[r].exports;var u=e[r]={i:r,l:!1,exports:{}};return t[r].call(u.exports,u,u.exports,n),u.l=!0,u.exports}var e={};return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=2)}([function(t,n,e){"use strict";function r(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}function u(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function t(){function n(t){for(var n="",e=0;e<4;e++)n+=y[t>>8*e+4&15]+y[t>>8*e&15];return n}function e(t,n){if(v||g){var e=(65535&t)+(65535&n);return(t>>16)+(n>>16)+(e>>16)<<16|65535&e}return t+n&4294967295}function i(t,n,r,u,i,o){return n=e(e(n,t),e(u,o)),e(n<<i|n>>>32-i,r)}function o(t,n,e,r,u,o,c){return i(n&e|~n&r,t,n,u,o,c)}function c(t,n,e,r,u,o,c){return i(n&r|e&~r,t,n,u,o,c)}function f(t,n,e,r,u,o,c){return i(n^e^r,t,n,u,o,c)}function a(t,n,e,r,u,o,c){return i(e^(n|~r),t,n,u,o,c)}function s(t){for(var n=[],e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}function l(t){var e=[];return t.forEach(function(t){e.push(n(t))}),e.join("")}function d(t,n){n.cycles.reduce(function(n,e){return e.blockMap.forEach(function(u,i){n[0]=e.method.apply(e,[].concat(r(n),[t[u]],r(e.extra[i]))),n.unshift(n.pop())}),n},n.runState)}function h(t,n){var r=t[0],u=t[1],i=t[2],s=t[3],l={runState:[r,u,i,s],cycles:[{method:o,blockMap:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],extra:[[7,-680876936],[12,-389564586],[17,606105819],[22,-1044525330],[7,-176418897],[12,1200080426],[17,-1473231341],[22,-45705983],[7,1770035416],[12,-1958414417],[17,-42063],[22,-1990404162],[7,1804603682],[12,-40341101],[17,-1502002290],[22,1236535329]]},{method:c,blockMap:[1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12],extra:[[5,-165796510],[9,-1069501632],[14,643717713],[20,-373897302],[5,-701558691],[9,38016083],[14,-660478335],[20,-405537848],[5,568446438],[9,-1019803690],[14,-187363961],[20,1163531501],[5,-1444681467],[9,-51403784],[14,1735328473],[20,-1926607734]]},{method:f,blockMap:[5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2],extra:[[4,-378558],[11,-2022574463],[16,1839030562],[23,-35309556],[4,-1530992060],[11,1272893353],[16,-155497632],[23,-1094730640],[4,681279174],[11,-358537222],[16,-722521979],[23,76029189],[4,-640364487],[11,-421815835],[16,530742520],[23,-995338651]]},{method:a,blockMap:[0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],extra:[[6,-198630844],[10,1126891415],[15,-1416354905],[21,-57434055],[6,1700485571],[10,-1894986606],[15,-1051523],[21,-2054922799],[6,1873313359],[10,-30611744],[15,-1560198380],[21,1309151649],[6,-145523070],[10,-1120210379],[15,718787259],[21,-343485551]]}]};d(n,l),t[0]=e(l.runState[0],t[0]),t[1]=e(l.runState[1],t[1]),t[2]=e(l.runState[2],t[2]),t[3]=e(l.runState[3],t[3])}function p(t){var n=t.length,e=[1732584193,-271733879,-1732584194,271733878],r=void 0;for(r=64;r<=t.length;r+=64)h(e,s(t.substring(r-64,r)));t=t.substring(r-64);var u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<t.length;r++)u[r>>2]|=t.charCodeAt(r)<<(r%4<<3);return u[r>>2]|=128<<(r%4<<3),r>55&&(h(e,u),u.fill(0,0,15)),u[14]=8*n,h(e,u),l(e)}var v=arguments.length>0&&void 0!==arguments[0]&&arguments[0];u(this,t);var y="0123456789abcdef".split(""),g=!1;(v||"5d41402abc4b2a76b9719d911017c592"!==p("hello"))&&(g=!0),this.calculate=function(t){return p(t)}};n.default=i,t.exports=n.default},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var u=e(4),i=function(t){return t&&t.__esModule?t:{default:t}}(u),o=function t(){function n(t){return void 0!==t.entity&&(void 0!==t.name&&(void 0===t.require||t.require.constructor===Array))}function e(t){var e=[];return t.constructor!==Array&&(t=[t]),t.forEach(function(t){if(n(t)){var r=Object.assign({},t),u=r.entity,o=r.name;delete r.entity,delete r.name,r.channel=new i.default(u,o),void 0!==r.listener&&r.channel.addListener(r.listener),c.hasOwnProperty(u)||Reflect.set(c,u,{});var f=Reflect.getOwnPropertyDescriptor(c,u).value;f.hasOwnProperty(o)||(Reflect.set(f,o,r),e.push(u+"."+o))}}),e}function u(t,n){return!!c.hasOwnProperty(t)&&(null===n||null!==o(t,n))}function o(t,n){if(c.hasOwnProperty(t)){var e=Reflect.getOwnPropertyDescriptor(c,t).value;if(e.hasOwnProperty(n))return Reflect.getOwnPropertyDescriptor(e,n).value.channel}return null}r(this,t);var c={};this.register=function(){return e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])},this.exists=function(t){return u(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)},this.get=function(t,n){return o(t,n)}};n.default=o,t.exports=n.default},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function u(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Impulses=void 0;var i=e(3),o=r(i),c=e(1),f=r(c),a=function t(){function n(){return new(Function.prototype.bind.apply(o.default,[null].concat(Array.prototype.slice.call(arguments))))}function e(){return new(Function.prototype.bind.apply(f.default,[null].concat(Array.prototype.slice.call(arguments))))}var r=arguments;u(this,t),this.getNewApi=function(){return n.apply(void 0,r)},this.getNewBus=function(){return e.apply(void 0,r)}};n.Impulses=new a},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function u(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=e(0),o=r(i),c=e(1),f=r(c),a=function t(){function n(){return _}function e(t){return null!==t}function r(){return e(P)}function i(){return e(O)}function c(t){return t.constructor===f.default}function a(t){if(!c(t))throw TypeError("Expecting Bus type");P=t}function s(t){if(!c(t))throw TypeError("Expecting Bus type");O=t}function l(t){return!(t.constructor!==Object||!t.hasOwnProperty("entity")||!t.hasOwnProperty("channels")||t.channels.constructor!==Array)}function d(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e(t)){if(l(r)){var u=r.channels.map(function(t){var e={entity:r.entity,name:t.name};return void 0!==t.require&&(e.require=t.require),void 0!==t.listenerInfo&&(e.listener=t.listenerInfo,e.listener.id=n()),e});return t.register(u)}throw TypeError("Invalid channel configuration")}throw Error("Target BUS is not set")}function h(t,n,r,u){var i=u||P;if(e(i)){var o=i.get(t,n);if(null!==o)return o.send(r)}return!1}function p(t){return void 0!==t.reply_stack&&t.reply_stack.pop()}function v(t,n){return y(t,n)||g(t,n)}function y(t,n){return!!r()&&P.get(t,n)}function g(t,n){return!!i()&&O.get(t,n)}function w(t,n){var e=p(n);if(!1!==e){var r=v(e.entity,e.name);if(!1!==r)return t.reply=!0,r.send(t),!0}return!1}var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,x=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(u(this,t),b.constructor!==Object)throw TypeError("Configuration must be of type Object");if(null!==m&&m.constructor!==f.default)throw TypeError("Public BUS Object is Invalid");if(null!==x&&x.constructor!==f.default)throw TypeError("Private BUS Object is Invalid");var P=m,O=x,_=void 0;_=function(){return _||(new o.default).calculate(JSON.stringify(this)+""+5e3*Math.random())}(),this.getId=function(){return n()},this.hasPublic=function(){return r()},this.hasPrivate=function(){return i()},this.setPublicBus=function(t){return a(t)},this.setPrivateBus=function(t){return s(t)},this.registerPublic=function(t){return d(P,t)},this.registerPrivate=function(t){return d(O,t)},this.sendPublic=function(t,n,e){return h(t,n,e,P)},this.sendPrivate=function(t,n,e){return h(t,n,e,O)},this.exists=function(t,n){return!!v(t,n)},this.existsPublic=function(t,n){return!!y(t,n)},this.existsPrivate=function(t,n){return!!g(t,n)},this.reply=function(t,n){return w(t,n)}};n.default=a,t.exports=n.default},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function u(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=e(5),o=r(i),c=e(0),f=r(c),a=function t(n,e){function r(){return N}function i(){return D}function c(){return U}function a(){return U&&F}function s(){return U&&!F}function l(){for(;i(););D=!0}function d(){D=!1}function h(){return!s()&&(U=!0,F=!1,S(),!0)}function p(){return!!c()&&(U=!1,!0)}function v(){return!!s()&&(F=!0,!0)}function y(){return!!a()&&(F=!1,S(),!0)}function g(){return c()?a()?B:q:k}function w(t){return!!b(t)&&z.add(t)}function b(t){return!!t&&(void 0!==t.id&&(void 0!==t.listener&&"function"==typeof t.listener))}function m(t){z.cancel(t),x(t)}function x(t){try{var n=J.findIndex(function(n){return n.qid===t});n>=0&&J.splice(n,1)}catch(t){}}function P(t){return O(t,function(){var n=J.find(function(n){return n.qid===t});return n?n.data:null})}function O(t,n){if(!t)return null;l();var e=z.get(t);return d(),null===e?n():e.data}function _(t){var n={entity:L,name:N};void 0===t.reply_stack&&(t.reply_stack=[]),t.reply_stack.push(n)}function j(t){try{J.forEach(function(n){_(t),n.data.listener(t),n.data.times>0&&n.data.times--}),J=J.filter(function(t){return void 0===t.data||void 0===t.data.times||0!==t.data.times})}catch(t){}}function E(t){return G.add(Object.assign({},t))}function M(t,n){var e=w(n);return E(t),e}function A(t){return G.get(t).data}function S(){s()&&(T(),C(),setTimeout(S,0))}function T(){if(!i()){l();for(var t=null,n=z.next();null!==n;){if("function"==typeof n.data.listener){t=R.calculate(n.toString());var e={id:t,qid:n.id,data:n.data};J.push(e)}n=z.next()}d()}}function C(){for(var t=G.next();null!==t;)j(t.data),t=G.next()}var I=arguments.length>2&&void 0!==arguments[2]&&arguments[2];u(this,t);var k=0,q=1,B=2,R=new f.default,D=!1,L=n,N=e,U=!0,F=I||!1,J=[],z=new o.default,G=new o.default;!function(){a()||S()}(),this.getName=function(){return r()},this.getStatus=function(){return g()},this.open=function(){return h()},this.close=function(){return p()},this.hold=function(){return v()},this.resume=function(){return y()},this.addListener=function(t){return w(t)},this.removeListener=function(t){return m(t)},this.listenerInfo=function(t){return P(t)},this.send=function(t){return E(t)},this.sendAndListen=function(t,n){return M(t,n)},this.messageInfo=function(t){return A(t)}};n.default=a,t.exports=n.default},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var u=e(6),i=function(t){return t&&t.__esModule?t:{default:t}}(u),o=function t(){function n(){return d}function e(){for(;n(););d=!0}function u(){d=!1}function o(){if(s.length>0){e();var t=s.shift(),n=a(t);return l.destroy(t),u(),n}return null}function c(t){e();for(var n=Date.now().toString();l.isSet(n);)n=Date.now().toString();return l.set(n,{id:n,data:t}),s.push(n),u(),n}function f(t){var n=s.indexOf(t);if(n>=0){e(),s.splice(n,1);var r=l.destroy(t);return u(),null===r||r}return null}function a(t){return l.get(t)}r(this,t);var s=[],l=new i.default,d=!1;this.next=function(){return o()},this.add=function(t){return c(t)},this.cancel=function(t){return f(t)},this.get=function(t){return a(t)}};n.default=o,t.exports=n.default},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var u=function t(){function n(){s=!0}function e(){s=!1}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return""===t?l:t.split(".").reduce(function(t,n){return t[n]||null},l)}function i(t){var n=t.split("."),e=n.splice(-1,1)[0],r=u(n.join("."));return!!r.hasOwnProperty(e)&&Reflect.deleteProperty(r,e)}function o(t){return u(t)}function c(t,e){var r=t.split("."),u=r.reduce(function(t,n,e){return t.hasOwnProperty(n)||Reflect.set(t,n,{}),e===r.length-1?t:t[n]},l);!0===Reflect.set(u,r.pop(),e)&&n()}function f(t){return null!==u(t)}var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r(this,t);var s=null!==a,l=a||{};this.isDirty=function(){return s},this.export=function(){return e(),Object.assign({},l)},this.set=function(t,n){c(t,n)},this.isSet=function(t){return f(t)},this.get=function(t){return o(t)},this.destroy=function(t){return i(t)}};n.default=u,t.exports=n.default}])});