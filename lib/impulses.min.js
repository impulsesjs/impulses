!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("impulses",[],n):"object"==typeof exports?exports.impulses=n():t.impulses=n()}(this,function(){return function(t){function n(r){if(e[r])return e[r].exports;var u=e[r]={i:r,l:!1,exports:{}};return t[r].call(u.exports,u,u.exports,n),u.l=!0,u.exports}var e={};return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=0)}([function(t,n,e){"use strict";var r=e(1),u=function(t){return t&&t.__esModule?t:{default:t}}(r);t.exports=new u.default},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var u=e(2),o=function(t){return t&&t.__esModule?t:{default:t}}(u),i=function t(){function n(t){return void 0!==t.entity&&(void 0!==t.name&&(void 0===t.require||t.require.constructor===Array))}function e(t){var e=[];return t.constructor!==Array&&(t=[t]),t.forEach(function(t){if(n(t)){var r=Object.assign({},t),u=r.entity,i=r.name;delete r.entity,delete r.name,r.channel=new o.default(u,i),void 0!==r.listener&&r.channel.addListener(r.listener),c.hasOwnProperty(u)||Reflect.set(c,u,{});var a=Reflect.getOwnPropertyDescriptor(c,u).value;a.hasOwnProperty(i)||(Reflect.set(a,i,r),e.push(u+"."+i))}}),e}function u(t,n){return!!c.hasOwnProperty(t)&&(null===n||null!==i(t,n))}function i(t,n){if(c.hasOwnProperty(t)){var e=Reflect.getOwnPropertyDescriptor(c,t).value;if(e.hasOwnProperty(n))return Reflect.getOwnPropertyDescriptor(e,n).value.channel}return null}r(this,t);var c={};this.register=function(){return e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])},this.exists=function(t){return u(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)},this.get=function(t,n){return i(t,n)}};n.default=i,t.exports=n.default},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function u(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=e(3),i=r(o),c=e(5),a=r(c),f=function t(n,e){function r(){return L}function o(){return T}function c(){return I}function f(){return I&&N}function s(){return I&&!N}function l(){for(;o(););T=!0}function d(){T=!1}function h(){return!s()&&(I=!0,N=!1,A(),!0)}function p(){return!!c()&&(I=!1,!0)}function v(){return!!s()&&(N=!0,!0)}function y(){return!!f()&&(N=!1,A(),!0)}function g(){return c()?f()?D:R:k}function w(t){return B.add(t)}function x(t){B.cancel(t),m(t)}function m(t){try{var n=z.findIndex(function(n){return n.qid===t});n>=0&&z.splice(n,1)}catch(t){}}function b(t){l();var n=B.get(t);if(d(),null===n)try{var e=z.find(function(n){return n.qid===t});void 0!==e&&(n=e.data)}catch(t){}else n=n.data;return n}function _(t){var n={entity:q,name:L};void 0===t.reply_stack&&(t.reply_stack=[]),t.reply_stack.push(n)}function O(t){try{z.forEach(function(n){_(t),n.data.listener(t),n.data.times>0&&n.data.times--}),z=z.filter(function(t){return void 0===t.data||void 0===t.data.times||0!==t.data.times})}catch(t){}}function P(t){return F.add(Object.assign({},t))}function j(t,n){var e=w(n);return P(t),e}function M(t){return F.get(t).data}function A(){s()&&(S(),C(),setTimeout(A,0))}function S(){if(!o()){l();for(var t=new a.default,n=null,e=B.next();null!==e;){if("function"==typeof e.data.listener){n=t.calculate(e.toString());var r={id:n,qid:e.id,data:e.data};z.push(r)}e=B.next()}d()}}function C(){for(var t=F.next();null!==t;)O(t.data),t=F.next()}var E=arguments.length>2&&void 0!==arguments[2]&&arguments[2];u(this,t);var k=0,R=1,D=2,T=!1,q=n,L=e,I=!0,N=E||!1,z=[],B=new i.default,F=new i.default;!function(){f()||A()}(),this.getName=function(){return r()},this.getStatus=function(){return g()},this.open=function(){return h()},this.close=function(){return p()},this.hold=function(){return v()},this.resume=function(){return y()},this.addListener=function(t){return w(t)},this.removeListener=function(t){return x(t)},this.listenerInfo=function(t){return b(t)},this.send=function(t){return P(t)},this.sendAndListen=function(t,n){return j(t,n)},this.messageInfo=function(t){return M(t)}};n.default=f,t.exports=n.default},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var u=e(4),o=function(t){return t&&t.__esModule?t:{default:t}}(u),i=function t(){function n(){return d}function e(){for(;n(););d=!0}function u(){d=!1}function i(){if(s.length>0){e();var t=s.shift(),n=f(t);return l.destroy(t),u(),n}return null}function c(t){e();for(var n=Date.now().toString();l.isSet(n);)n=Date.now().toString();return l.set(n,{id:n,data:t}),s.push(n),u(),n}function a(t){var n=s.indexOf(t);if(n>=0){e(),s.splice(n,1);var r=l.destroy(t);return u(),null===r||r}return null}function f(t){return l.get(t)}r(this,t);var s=[],l=new o.default,d=!1;this.next=function(){return i()},this.add=function(t){return c(t)},this.cancel=function(t){return a(t)},this.get=function(t){return f(t)}};n.default=i,t.exports=n.default},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var u=function t(){function n(){s=!0}function e(){s=!1}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return""===t?l:t.split(".").reduce(function(t,n){return t[n]||null},l)}function o(t){var n=t.split("."),e=n.splice(-1,1)[0],r=u(n.join("."));return!!r.hasOwnProperty(e)&&Reflect.deleteProperty(r,e)}function i(t){return u(t)}function c(t,e){var r=t.split("."),u=r.reduce(function(t,n,e){return t.hasOwnProperty(n)||Reflect.set(t,n,{}),e===r.length-1?t:t[n]},l);!0===Reflect.set(u,r.pop(),e)&&n()}function a(t){return null!==u(t)}var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r(this,t);var s=null!==f,l=f||{};this.isDirty=function(){return s},this.export=function(){return e(),Object.assign({},l)},this.set=function(t,n){c(t,n)},this.isSet=function(t){return a(t)},this.get=function(t){return i(t)},this.destroy=function(t){return o(t)}};n.default=u,t.exports=n.default},function(t,n,e){"use strict";function r(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}function u(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function t(){function n(t){for(var n="",e=0;e<4;e++)n+=y[t>>8*e+4&15]+y[t>>8*e&15];return n}function e(t,n){if(v||g){var e=(65535&t)+(65535&n);return(t>>16)+(n>>16)+(e>>16)<<16|65535&e}return t+n&4294967295}function o(t,n,r,u,o,i){return n=e(e(n,t),e(u,i)),e(n<<o|n>>>32-o,r)}function i(t,n,e,r,u,i,c){return o(n&e|~n&r,t,n,u,i,c)}function c(t,n,e,r,u,i,c){return o(n&r|e&~r,t,n,u,i,c)}function a(t,n,e,r,u,i,c){return o(n^e^r,t,n,u,i,c)}function f(t,n,e,r,u,i,c){return o(e^(n|~r),t,n,u,i,c)}function s(t){for(var n=[],e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}function l(t){var e=[];return t.forEach(function(t){e.push(n(t))}),e.join("")}function d(t,n){n.cycles.reduce(function(n,e){return e.blockMap.forEach(function(u,o){n[0]=e.method.apply(e,[].concat(r(n),[t[u]],r(e.extra[o]))),n.unshift(n.pop())}),n},n.runState)}function h(t,n){var r=t[0],u=t[1],o=t[2],s=t[3],l={runState:[r,u,o,s],cycles:[{method:i,blockMap:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],extra:[[7,-680876936],[12,-389564586],[17,606105819],[22,-1044525330],[7,-176418897],[12,1200080426],[17,-1473231341],[22,-45705983],[7,1770035416],[12,-1958414417],[17,-42063],[22,-1990404162],[7,1804603682],[12,-40341101],[17,-1502002290],[22,1236535329]]},{method:c,blockMap:[1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12],extra:[[5,-165796510],[9,-1069501632],[14,643717713],[20,-373897302],[5,-701558691],[9,38016083],[14,-660478335],[20,-405537848],[5,568446438],[9,-1019803690],[14,-187363961],[20,1163531501],[5,-1444681467],[9,-51403784],[14,1735328473],[20,-1926607734]]},{method:a,blockMap:[5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2],extra:[[4,-378558],[11,-2022574463],[16,1839030562],[23,-35309556],[4,-1530992060],[11,1272893353],[16,-155497632],[23,-1094730640],[4,681279174],[11,-358537222],[16,-722521979],[23,76029189],[4,-640364487],[11,-421815835],[16,530742520],[23,-995338651]]},{method:f,blockMap:[0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],extra:[[6,-198630844],[10,1126891415],[15,-1416354905],[21,-57434055],[6,1700485571],[10,-1894986606],[15,-1051523],[21,-2054922799],[6,1873313359],[10,-30611744],[15,-1560198380],[21,1309151649],[6,-145523070],[10,-1120210379],[15,718787259],[21,-343485551]]}]};d(n,l),t[0]=e(l.runState[0],t[0]),t[1]=e(l.runState[1],t[1]),t[2]=e(l.runState[2],t[2]),t[3]=e(l.runState[3],t[3])}function p(t){var n=t.length,e=[1732584193,-271733879,-1732584194,271733878],r=void 0;for(r=64;r<=t.length;r+=64)h(e,s(t.substring(r-64,r)));t=t.substring(r-64);var u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<t.length;r++)u[r>>2]|=t.charCodeAt(r)<<(r%4<<3);return u[r>>2]|=128<<(r%4<<3),r>55&&(h(e,u),u.fill(0,0,15)),u[14]=8*n,h(e,u),l(e)}var v=arguments.length>0&&void 0!==arguments[0]&&arguments[0];u(this,t);var y="0123456789abcdef".split(""),g=!1;(v||"5d41402abc4b2a76b9719d911017c592"!==p("hello"))&&(g=!0),this.calculate=function(t){return p(t)}};n.default=o,t.exports=n.default}])});